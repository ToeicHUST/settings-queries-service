#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Checking code quality before push..."
echo ""






# 1. Build project
echo "ğŸ—ï¸  Building project..."
npm run build || {
  echo ""
  echo "âŒ Build failed. Please fix build errors before pushing."
  echo "ğŸ’¡ Run 'npm run build' locally to see the errors."
  exit 1
}

# 2. Run Unit Tests (Coverage)
echo "ğŸ§ª Running unit tests (coverage)..."
npm run test:cov || {
  echo ""
  echo "âŒ Unit tests failed."
  exit 1
}

# 3. Run E2E Tests
echo "ğŸ¤– Running E2E tests..."
npm run test:e2e || {
  echo ""
  echo "âŒ E2E tests failed."
  exit 1
}

echo ""
echo "âœ… All checks passed! Proceeding with push..."
echo ""